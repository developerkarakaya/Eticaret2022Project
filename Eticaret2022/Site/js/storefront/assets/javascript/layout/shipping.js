;(function($,w){'use strict';if(!w.jQuery){throw 'Ideasoft: jQuery not found';}
w.IdeaApp[IdeaApp.helpers.getRouteGroup()]={init:function(){IdeaApp.helpers.initializePage();},tracking:{init:function(){this.eventListener();this.validateForm();},submitForm:function(el){el.addClass('btn-loading').attr('disabled',true);var formContainer=$("#form-container");IdeaApp.helpers.ajaxRequest({url:"/kargo-sorgula",data:$('[name="shipping-tracking-form"]').serialize(),type:"POST",success:function(response){el.removeClass('btn-loading').removeAttr('disabled');formContainer.html(response);var inlineForm=formContainer.find('form');if(inlineForm.attr('method')=='get'){var inlineCode=inlineForm.attr('action')+'?'+$(response).serialize();var userAgent=window.navigator.userAgent;if(userAgent.match(/iPad/i)||userAgent.match(/iPhone/i)){setTimeout(function(){document.location.href=inlineCode;},250);formContainer.html("");}else{window.open(inlineCode);formContainer.html("");}}else{var userAgent=window.navigator.userAgent;if(userAgent.match(/iPad/i)||userAgent.match(/iPhone/i)){var output='<div class="row"><div class="col-12 col-lg-9 text-right">\
                                              <input type="submit" value="Sorgulama tamamlandı. İşlem durumunu görmek için tıklayın." class="shipping-iphone-button" />\
                                              </div></div>';inlineForm.append(output);}else{inlineForm.submit();formContainer.html("");}}}});},validateForm:function(){$('[name="shipping-tracking-form"]').validate({errorElement:"div",validClass:'validate',errorClass:'validate-error',rules:{trackingCode:{required:true}},messages:{trackingCode:{required:"Lütfen "+IdeaApp.helpers.getFormValidateMessage('[name="shipping-tracking-form"] input[name="trackingCode"]')+" giriniz."}},showErrors:function(errorMap,errorList){for(var i=0;i<errorList.length;i++){var error=errorList[i];error=IdeaApp.helpers.modifyValidationError(error);}
this.defaultShowErrors();}});},eventListener:function(){var self=this;$(document).on('click','[data-selector="shipping-tracking-submit"]',function(){if($('[name="shipping-tracking-form"]').valid()){self.submitForm($(this));}});$(document).keypress('[data-selector="shipping-tracking-submit"]',function(e){if(e.keyCode===13){e.preventDefault();if($('[name="shipping-tracking-form"]').valid()){self.submitForm($(this));}}});}}}}(jQuery,window));